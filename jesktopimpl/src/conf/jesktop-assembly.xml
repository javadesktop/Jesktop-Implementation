<?xml version="1.0" encoding="UTF-8"?>

<assembly>

  <!-- The Storage block -->
  <block class="org.apache.avalon.cornerstone.blocks.masterstore.RepositoryManager"
         name="objectstorage" />

  <!-- The ThreadManager block -->
  <block class="org.apache.avalon.cornerstone.blocks.threads.DefaultThreadManager" 
         name="thread-manager" />

  <!-- The Packet Manager block -->
  <block class="org.apache.avalon.cornerstone.blocks.packet.DefaultPacketManager"
         name="packet-manager">
    <provide name="thread-manager" 
             role="org.apache.avalon.cornerstone.services.threads.ThreadManager" />
  </block>

  <!-- The Connection Manager block -->
  <block class="org.apache.avalon.cornerstone.blocks.connection.DefaultConnectionManager"
         name="connections">
    <provide name="thread-manager" 
             role="org.apache.avalon.cornerstone.services.threads.ThreadManager" />
  </block>

  <!-- The Socket Manager block -->
  <block class="org.apache.avalon.cornerstone.blocks.sockets.DefaultSocketManager" name="sockets" />

  <!-- The TimeScheduler block -->
  <block class="org.apache.avalon.cornerstone.blocks.scheduler.DefaultTimeScheduler" name="scheduler">
    <provide name="thread-manager" 
             role="org.apache.avalon.cornerstone.services.threads.ThreadManager" />
  </block>

  <block class="org.apache.avalon.cornerstone.blocks.dom.DOMBuilderFactory" name="dom-builder-factory" />
 

  <!--                 -->
  <!-- Jesktops blocks -->
  <!--                 -->

  
  <block class="org.apache.avalon.jesktop.core.LaunchableTargetFactoryImpl" name="launchable-target-factory">
      <provide name="objectstorage" role="org.apache.avalon.cornerstone.services.store.Store"/>
  </block> 
  
  <block class="org.apache.avalon.jesktop.core.ConfigManagerImpl" name="cfg-mgr">
      <provide name="dom-builder-factory" role="org.apache.avalon.cornerstone.services.dom.DocumentBuilderFactory" />
      <provide name="objectstorage" role="org.apache.avalon.cornerstone.services.store.Store"/>
      <provide name="launchable-target-factory" role="org.apache.avalon.jesktop.services.LaunchableTargetFactory"/>
  </block>  
  
  <block class="org.apache.avalon.jesktop.core.ImageRepositoryImpl" name="image-repository">
      <provide name="objectstorage" role="org.apache.avalon.cornerstone.services.store.Store"/>
  </block>       
  
  <block class="org.apache.avalon.jesktop.windowmanagers.windoze.WindozeWindowManager1"
         name="jesktop-windowmanager"/>         

  <block class="org.apache.avalon.jesktop.core.DesktopKernelImpl" name="jesktop-kernel" >
    <provide name="cfg-mgr" role="org.apache.avalon.jesktop.services.KernelConfigManager"/>
    <provide name="image-repository" role="org.jesktop.api.ImageRepository"/>
    <provide name="jesktop-windowmanager" role="org.apache.avalon.jesktop.services.WindowManager"/>
    <provide name="objectstorage" role="org.apache.avalon.cornerstone.services.store.Store"/>
    <provide name="launchable-target-factory" role="org.apache.avalon.jesktop.services.LaunchableTargetFactory"/>
    <provide name="thread-manager" role="org.apache.avalon.cornerstone.services.threads.ThreadManager"/>
  </block>

</assembly>